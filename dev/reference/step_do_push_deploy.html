<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Step: Perform push deploy — step_do_push_deploy • tic</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>



<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<!-- ropensci -->
<link href="../ropensci.css?nocache=123" rel="stylesheet">

<meta property="og:title" content="Step: Perform push deploy — step_do_push_deploy" />
<meta property="og:description" content="Commits and pushes to a repo prepared by step_setup_push_deploy().
Deployment usually requires setting up SSH keys with
use_tic() or travis::use_travis_deploy()." />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci" /></a>
        <a class="navbar-brand" href="../index.html"><i>tic <small>v0.8.0.9002</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Introduction
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/features.html">Feature Overview</a>
    </li>
    <li>
      <a href="../articles/build-lifecycle.html">The CI Build Lifecycle</a>
    </li>
    <li>
      <a href="../articles/ci-client-packages.html">CI Client Packages</a>
    </li>
    <li>
      <a href="../articles/ci-providers.html">CI Providers</a>
    </li>
    <li>
      <a href="../articles/faq.html">FAQ</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/advanced.html">Advanced Usage</a>
    </li>
    <li>
      <a href="../articles/deployment.html">Deployment</a>
    </li>
    <li>
      <a href="../articles/custom-steps.html">Custom Steps</a>
    </li>
    <li>
      <a href="../articles/updating.html">Updating Templates</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/tic/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Step: Perform push deploy</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/tic/blob/master/R/steps-git.R'><code>R/steps-git.R</code></a></small>
    <div class="hidden name"><code>step_do_push_deploy.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Commits and pushes to a repo prepared by <code><a href='step_setup_push_deploy.html'>step_setup_push_deploy()</a></code>.</p>
<p>Deployment usually requires setting up SSH keys with
<code><a href='use_tic.html'>use_tic()</a></code> or <code><a href='https://rdrr.io/pkg/travis/man/use_travis_deploy.html'>travis::use_travis_deploy()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>step_do_push_deploy</span>(
  <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='kw'>commit_message</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>commit_paths</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='kw'>force</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>path</th>
      <td><p><code>[string]</code><br />
Path to the repository, default <code>"."</code> which means setting up the current
repository.</p></td>
    </tr>
    <tr>
      <th>commit_message</th>
      <td><p><code>[string]</code><br />
Commit message to use, defaults to a useful message linking to the CI build
and avoiding recursive CI runs.</p></td>
    </tr>
    <tr>
      <th>commit_paths</th>
      <td><p><code>[character]</code><br />
Restrict the set of directories and/or files added to Git before deploying.
Default: deploy all files.</p></td>
    </tr>
    <tr>
      <th>force</th>
      <td><p><code>[logical]</code><br />
Add <code>--force</code> flag to git commands?</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>It is highly recommended to restrict the set of files
touched by the deployment with the <code>commit_paths</code> argument:
this step assumes that it can freely overwrite all changes to all files
below <code>commit_paths</code>, and will not warn in case of conflicts.</p>
<p>To mitigate conflicts race conditions to the greatest extent possible,
the following strategy is used:</p><ul>
<li><p>The changes are committed to the branch</p></li>
<li><p>Before pushing, new commits are fetched, and the changes are cherry-picked
on top of the new commits</p></li>
</ul>

<p>If no new commits were pushed after the CI run has started,
this strategy is equivalent to committing and pushing.
In the opposite case, if the remote repo has new commits,
the deployment is safely applied to the current tip.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other deploy steps: 
<code><a href='step_push_deploy.html'>step_push_deploy</a>()</code>,
<code><a href='step_setup_push_deploy.html'>step_setup_push_deploy</a>()</code></p>
<p>Other steps: 
<code><a href='step_add_to_drat.html'>step_add_to_drat</a>()</code>,
<code><a href='step_add_to_known_hosts.html'>step_add_to_known_hosts</a>()</code>,
<code><a href='step_build_pkgdown.html'>step_build_pkgdown</a>()</code>,
<code><a href='step_hello_world.html'>step_hello_world</a>()</code>,
<code><a href='step_install_pkg.html'>step_install_pkg</a></code>,
<code><a href='step_install_ssh_keys.html'>step_install_ssh_keys</a>()</code>,
<code><a href='step_push_deploy.html'>step_push_deploy</a>()</code>,
<code><a href='step_run_code.html'>step_run_code</a>()</code>,
<code><a href='step_setup_push_deploy.html'>step_setup_push_deploy</a>()</code>,
<code><a href='step_setup_ssh.html'>step_setup_ssh</a>()</code>,
<code><a href='step_test_ssh.html'>step_test_ssh</a>()</code>,
<code><a href='step_write_text_file.html'>step_write_text_file</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='dsl_get.html'>dsl_init</a></span>()

<span class='co'># Deployment only works if a companion step_setup_push_deploy() is added</span>
<span class='fu'><a href='dsl.html'>get_stage</a></span>(<span class='st'>"deploy"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='dsl.html'>add_step</a></span>(<span class='fu'><a href='step_setup_push_deploy.html'>step_setup_push_deploy</a></span>(<span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"docs"</span>, <span class='kw'>branch</span> <span class='kw'>=</span> <span class='st'>"gh-pages"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='dsl.html'>add_step</a></span>(<span class='fu'><a href='step_build_pkgdown.html'>step_build_pkgdown</a></span>())

<span class='kw'>if</span> (<span class='kw pkg'>rlang</span><span class='kw ns'>::</span><span class='fu'><a href='https://rlang.r-lib.org/reference/is_installed.html'>is_installed</a></span>(<span class='st'>"git2r"</span>) <span class='kw'>&amp;&amp;</span> <span class='kw pkg'>git2r</span><span class='kw ns'>::</span><span class='fu'><a href='https://docs.ropensci.org/git2r/reference/in_repository.html'>in_repository</a></span>()) {
  <span class='fu'><a href='dsl.html'>get_stage</a></span>(<span class='st'>"deploy"</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='dsl.html'>add_step</a></span>(<span class='fu'>step_do_push_deploy</span>(<span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"docs"</span>))
}

<span class='fu'><a href='dsl_get.html'>dsl_get</a></span>()
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <!-- begin footer -->
<div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg" /></div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Info</h5>
                            <li><a href="https://ropensci.org/about">Mission</a></li>
                            <li><a href="https://ropensci.org/about#team">Team</a></li>
                            <li><a href="https://ropensci.org/about#collaborators">Collaborators</a></li>
                            <li><a href="https://ropensci.org/careers">Careers</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Work</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/blog/">Blog</a></li>
                            <li><a href="https://ropensci.org/technotes/">Tech Notes</a></li>
                            <li><a href="https://ropensci.org/tutorials/">Tutorials</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/resources/">More Resources</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Participate</h5>
                            <li><a href="https://ropensci.org/contact/">Contact us</a></li>
                            <li><a href="https://ropensci.org/community/">Community</a></li>
                            <li><a href="https://ropensci.org/software-review/">Contribute software</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/donate/">Donate</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
   </div>

  


  </body>
</html>


